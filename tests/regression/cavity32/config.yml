case: cavity_32
mesh:
  global: [256, 256, 1]        # thin slab in z
  ng: 2
  periodic: [false, false, true]   # periodic in z ⇒ spanwise-invariant “2-D”
  proc_grid: [0, 0, 1]   # MPI cores decomposition by axis px, py, pz / 0 is automatically chosen

time:
  dt: 5.0e-4
  t_end: 2.0             # run to steady
  write_every: { steps: 200 }

io:
  path: "@OUT_DIR@"
  backend: cgns
  precision: native
  async: { enabled: false }
  preflight: { enabled: false }

plugins:
  - lib: libphysics_fluids.so

program:
  key: les
  params:
    # Unit square in x–y (L=1); use spacings consistent with mesh
    dx: "0.00390625"
    dy: "0.00390625"
    dz: "1.0"

    rho: "1"
    # Pick Re by nu = 1/Re (with U0 = 1, L = 1)

    Cs: "0.0" # No LES for benchmark

    scheme: "piso"
    num_corrections: "2"
    div_tol: "1.0e-7"

    time_scheme: "abm3"   

    # Lid-driven cavity BCs: moving lid at north; other walls no-slip
    bc.u.west:   "dirichlet:0"
    bc.u.east:   "dirichlet:0"
    bc.u.south:  "dirichlet:0"
    bc.u.north:  "dirichlet:1"   # lid = 1 m/s
    bc.u.top:    "dirichlet:0"
    bc.u.bottom: "dirichlet:0"

    bc.v.*: "dirichlet:0"
    bc.w.*: "dirichlet:0"        # won’t matter with periodic z, but harmless
    bc.p.*: "neumann:0"          # pressure Neumann

fields:
  output: [u, v, w, p]
